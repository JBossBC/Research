# Websocket

## Question

websocket与http协议的兼容性具体体现在什么地方，后面的话理解不了？

跨域问题?

----

websocket是一种数据通信协议，也是用于客户端和服务端的数据通信，与http通信不同的是，http是基于请求响应式的单向通讯,通信只能由客户端发送,而服务端不能主动向客户端推送信息。

基于http单向请求的特点，有一种非常局限的情况，当服务器有连续的状态变化，客户端如果要获知，只能使用轮询:每隔一段时间，就发送一个询问来了解服务器有没有新的状态更新。这种情况的局限性在于，客户端很难在"隔多少时间段再询问"中进行取舍,如果时间过长哪个，客户无法及时收到实时消息，如果时间过短，容易给网络造成多余的负载。实时消息推送的主动方应在于服务器,应该由服务器在状态变化的时候主动将消息发送给客户端。

websocket最大的特点就是服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送消息，是真正的双向平等对话。

其他特点:

+ 和HTTP一样属于应用层协议，也是建立在TCP协议之上，服务器端的实现比较容易
+ 与HTTP协议有着良好的兼容性。默认端口也是50和443,并且握手阶段(第一次建立连接)采用HTTP协议，因此握手时不容易屏蔽,能通过各种HTTP代理服务器
+ 数据格式比较轻量，性能开销小，通信高效
+ 可以发送文本，也可以发送二进制数据(***)
+ 没有同源跨域限制，客户端可以与任意服务器通信。
+ 协议标识符是ws(如果加密，则为wss),服务器网址就是url
+ 浏览器专门为websocket通信提供了一个请求对象websocket

websocket并不是替代http的方案，我将他理解为是为了补充http协议不能完成的业务场景。websocket也是有资源消耗的，因为他要实时通信，需要和服务端保持一定的通信连接。

websocket需要服务端的配合才能使用
